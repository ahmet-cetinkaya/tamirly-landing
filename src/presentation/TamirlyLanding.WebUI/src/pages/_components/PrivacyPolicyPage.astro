---
import LandingLayout from "../../layouts/LandingLayout.astro";
import { Locales } from "../../shared/i18n/enums/Locales";
import { TranslationKeys } from "../../shared/i18n/enums/TranslationKeys";
import { i18nInstance } from "../../shared/i18n/instance";
import { CONTACT_EMAIL } from "../../shared/constants";

interface Props {
  locale?: Locales;
}

// Default to EN if no locale is provided, though in our setup it should be passed.
const { locale = Locales.EN } = Astro.props;

const t = (key: TranslationKeys) => i18nInstance.translate(locale, key);

const subject = encodeURIComponent(t(TranslationKeys.PRIVACY_CONTACT_SUBJECT));
const body = encodeURIComponent(t(TranslationKeys.PRIVACY_CONTACT_BODY));
const contactMailto = `mailto:${CONTACT_EMAIL}?subject=${subject}&body=${body}`;
---

<LandingLayout
  title={`${t(TranslationKeys.PRIVACY_TITLE)} - Tamirly`}
  description="Privacy Policy for Tamirly application."
  locale={locale}
>
  <div class="bg-surface-dark min-h-screen pt-32 pb-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h1 class="text-4xl font-bold text-text-main mb-8">{t(TranslationKeys.PRIVACY_TITLE)}</h1>

      <div class="prose prose-invert prose-lg text-text-muted">
        <p class="mb-6">
          {t(TranslationKeys.PRIVACY_LAST_UPDATED)}
        </p>

        <section class="mb-8">
          <h2 class="text-2xl font-semibold text-text-main mb-4">{t(TranslationKeys.PRIVACY_INTRO_TITLE)}</h2>
          <p>
            {t(TranslationKeys.PRIVACY_INTRO_TEXT)}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-semibold text-text-main mb-4">{t(TranslationKeys.PRIVACY_DATA_TITLE)}</h2>
          <p>
            {t(TranslationKeys.PRIVACY_DATA_TEXT_1)}
          </p>
          <p class="mt-4">
            {t(TranslationKeys.PRIVACY_DATA_TEXT_2)}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-semibold text-text-main mb-4">{t(TranslationKeys.PRIVACY_PERMISSIONS_TITLE)}</h2>
          <p>
            {t(TranslationKeys.PRIVACY_PERMISSIONS_TEXT)}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-semibold text-text-main mb-4">{t(TranslationKeys.PRIVACY_THIRD_PARTY_TITLE)}</h2>
          <p>
            {t(TranslationKeys.PRIVACY_THIRD_PARTY_TEXT)}
          </p>
        </section>

        <section class="mb-8">
          <h2 class="text-2xl font-semibold text-text-main mb-4">{t(TranslationKeys.PRIVACY_CONTACT_TITLE)}</h2>
          <p>
            {t(TranslationKeys.PRIVACY_CONTACT_TEXT)}
            <a href={contactMailto} class="text-primary hover:underline">{CONTACT_EMAIL}</a>
          </p>
        </section>
      </div>
    </div>
  </div>
</LandingLayout>
